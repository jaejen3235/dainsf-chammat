<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¤ë¹„ ì •ë³´ ê´€ë¦¬</title>
    <style>
        /* CSS Variables and General Layout (Consistent) */
        :root {
            --primary-color: #00bcd4;     
            --secondary-color: #673ab7;   
            --background: #f8f9fa;
            --card-bg: white;
            --main-font: #343a40;
            --border-color: #dee2e6;
            --status-operating: #4caf50;    /* ìš´ì˜ ì¤‘ */
            --status-critical: #f44336;      /* ê¸´ê¸‰ ì •ì§€ */
            --status-inspection: #ff9800;    /* ì •ê¸° ì ê²€ */
            --status-info: #6c757d;       
        }

        body {
            font-family: 'Malgun Gothic', 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background);
            color: var(--main-font);
        }

        .main-container {
            padding: 30px;
            max-width: 1600px; 
            margin: 0 auto;
        }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary-color);
        }

        .analysis-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
            margin-bottom: 30px;
        }

        .card-header {
            font-size: 20px;
            font-weight: 600;
            color: var(--main-font);
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 2px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        /* KPI Grid and Table Styles (Reusing previous styles) */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .kpi-card {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .kpi-total { background-color: var(--status-info); }
        .kpi-operating { background-color: var(--status-operating); }
        .kpi-critical { background-color: var(--status-critical); }
        .kpi-pm { background-color: var(--primary-color); }
        
        .kpi-title { font-size: 14px; font-weight: 500; margin-bottom: 5px; opacity: 0.8; }
        .kpi-value { font-size: 32px; font-weight: 700; }

        .data-table { width: 100%; border-collapse: collapse; font-size: 14px; }
        .data-table th, .data-table td { padding: 12px 15px; text-align: left; border-bottom: 1px solid var(--border-color); }
        .data-table th { background-color: #f0f4f7; color: var(--secondary-color); font-weight: 600; }
        .data-table tr:hover { background-color: #f5f5f5; cursor: pointer; }

        .btn { padding: 8px 15px; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; }
        .btn-primary { background-color: var(--primary-color); color: white; }
        .btn-submit { background-color: var(--secondary-color); color: white; margin-top: 20px; }

        /* Status Badges */
        .status-badge { display: inline-block; padding: 4px 8px; border-radius: 3px; font-weight: 700; font-size: 11px; color: white; }
        .status-operating-color { background-color: var(--status-operating); }
        .status-critical-color { background-color: var(--status-critical); }
        .status-inspection-color { background-color: var(--status-inspection); }

        /* --- Modal (Popup) Styles --- */
        .modal-overlay {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4); 
        }
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto; 
            padding: 30px;
            border-radius: 8px;
            width: 600px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        .modal-close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .modal-close:hover,
        .modal-close:focus { color: #000; text-decoration: none; cursor: pointer; }

        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; font-weight: 600; margin-bottom: 5px; color: var(--secondary-color); }
        .form-group input, .form-group select { 
            width: calc(100% - 20px); 
            padding: 10px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            box-sizing: border-box; 
        }

    </style>
</head>
<body>

    <div class="main-container">
        <div class="page-title">âš™ï¸ ì„¤ë¹„ ì •ë³´ ê´€ë¦¬ ë° $\text{Asset}$ $\text{Register}$</div>

        <div class="kpi-grid">
            <div class="kpi-card kpi-total">
                <div class="kpi-title">ì´ ë“±ë¡ ì„¤ë¹„ ìˆ˜ (EA)</div>
                <div class="kpi-value">120</div>
            </div>
            <div class="kpi-card kpi-operating">
                <div class="kpi-title">ìš´ì˜ ì¤‘ ì„¤ë¹„ ìˆ˜ (EA)</div>
                <div class="kpi-value">110</div>
            </div>
            <div class="kpi-card kpi-critical">
                <div class="kpi-title">ê¸´ê¸‰ ì •ì§€/ì ê²€ ì„¤ë¹„ (EA)</div>
                <div class="kpi-value">3</div>
            </div>
            <div class="kpi-card kpi-pm">
                <div class="kpi-title">ê¸ˆì›” $\text{PM}$ ì˜ˆì • ê±´ìˆ˜</div>
                <div class="kpi-value">15</div>
            </div>
        </div>

        <div class="analysis-card">
            <div class="card-header">
                <span>ì„¤ë¹„ ëª©ë¡ (ì „ì²´ ìì‚°)</span>
                <button class="btn btn-primary" onclick="openEquipmentModal('New')">+ ì‹ ê·œ ì„¤ë¹„ ë“±ë¡</button>
            </div>
            
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ì„¤ë¹„ $\text{ID}$</th>
                        <th>ì„¤ë¹„ëª…</th>
                        <th>ìƒì‚° ë¼ì¸</th>
                        <th>$\text{Model}$ $\text{No.}$</th>
                        <th>ìš´ì˜ ìƒíƒœ</th>
                        <th>ìµœì¢… ì ê²€ì¼</th>
                        <th>ìƒì„¸</th>
                    </tr>
                </thead>
                <tbody id="equipment-list">
                    <tr onclick="openEquipmentModal('EQ-A101')">
                        <td>EQ-A101</td>
                        <td>CNC Milling</td>
                        <td>LINE A</td>
                        <td>NX-5000</td>
                        <td><span class="status-badge status-operating-color">ìš´ì˜ ì¤‘</span></td>
                        <td>2025.11.01</td>
                        <td><button class="btn btn-primary btn-sm">ìƒì„¸ ë³´ê¸°</button></td>
                    </tr>
                    <tr onclick="openEquipmentModal('EQ-B205')">
                        <td>EQ-B205</td>
                        <td>Laser Welder</td>
                        <td>LINE B</td>
                        <td>LW-200</td>
                        <td><span class="status-badge status-critical-color">ê¸´ê¸‰ ì •ì§€</span></td>
                        <td>2025.11.11</td>
                        <td><button class="btn" style="background-color: var(--status-critical); color: white;">ì¡°ì¹˜ í•„ìš”</button></td>
                    </tr>
                    <tr onclick="openEquipmentModal('EQ-A102')">
                        <td>EQ-A102</td>
                        <td>Robot Arm</td>
                        <td>LINE A</td>
                        <td>RA-300</td>
                        <td><span class="status-badge status-inspection-color">ì •ê¸° ì ê²€</span></td>
                        <td>2025.10.15</td>
                        <td><button class="btn" style="background-color: var(--status-inspection); color: white;">ìƒì„¸ ë³´ê¸°</button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    
    <div id="equipment-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close" onclick="closeEquipmentModal()">&times;</span>
            <h2 id="modal-title">ì„¤ë¹„ ë“±ë¡ (ì‹ ê·œ)</h2>
            <form id="equipment-form">
                <div class="form-group">
                    <label for="eq-id">ì„¤ë¹„ $\text{ID}$</label>
                    <input type="text" id="eq-id" value="(ìë™ ìƒì„±)" disabled>
                </div>
                <div class="form-group">
                    <label for="eq-name">ì„¤ë¹„ëª…</label>
                    <input type="text" id="eq-name" required>
                </div>
                <div class="form-group">
                    <label for="model-no">Model No.</label>
                    <input type="text" id="model-no">
                </div>
                
                <div class="form-group">
                    <label for="line">ì†Œì† ìƒì‚° ë¼ì¸</label>
                    <select id="line">
                        <option value="LINE A">LINE A</option>
                        <option value="LINE B">LINE B</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="purchase-date">ë„ì…ì¼</label>
                    <input type="date" id="purchase-date" value="2022-05-01">
                </div>
                <div class="form-group">
                    <label for="sensor-id">IoT Sensor ID</label>
                    <input type="text" id="sensor-id">
                </div>

                <div id="history-section" style="border-top: 1px dashed #ccc; padding-top: 15px; margin-top: 15px; display: none;">
                    <h3>ìƒíƒœ ë° ì´ë ¥</h3>
                    <p><strong>ìµœê·¼ $\text{PM}$ ì¼ì:</strong> <span id="last-pm-date">2025.11.01</span></p>
                    <p><strong>ë‹¤ìŒ $\text{PM}$ ì˜ˆì •ì¼:</strong> <span id="next-pm-date">2026.05.01</span></p>
                    <p><strong>ìµœê·¼ ê³ ì¥ ì´ë ¥:</strong> <span id="last-fault">2025.10.10 (ëª¨í„° $\text{Fault}$)</span></p>
                    <button type="button" class="btn btn-primary" style="margin-top: 10px;">ìœ ì§€ë³´ìˆ˜ ì´ë ¥ ì „ì²´ ë³´ê¸°</button>
                </div>

                <button type="submit" class="btn btn-submit" id="submit-button">ì„¤ë¹„ ì •ë³´ ë“±ë¡/ìˆ˜ì •</button>
            </form>
        </div>
    </div>

    <script>
        const MOCK_EQUIPMENT = {
            'EQ-A101': { 
                name: 'CNC Milling', model: 'NX-5000', line: 'LINE A', 
                date: '2022-05-01', sensor: 'SN-123456', 
                lastPM: '2025.11.01', nextPM: '2026.05.01', fault: 'ëª¨í„° Fault'
            },
            'EQ-B205': { 
                name: 'Laser Welder', model: 'LW-200', line: 'LINE B', 
                date: '2023-01-15', sensor: 'SN-789012', 
                lastPM: '2025.09.20', nextPM: '2026.03.20', fault: 'ë ˆì´ì € ì¶œë ¥ ì´ìƒ'
            }
        };

        /** ì„¤ë¹„ ë“±ë¡/ìƒì„¸ íŒì—…ì„ ì—´ê³  ì •ë³´ë¥¼ ì±„ì›ë‹ˆë‹¤. */
        function openEquipmentModal(eqId) {
            const modal = document.getElementById('equipment-modal');
            const historySection = document.getElementById('history-section');
            const form = document.getElementById('equipment-form');

            if (eqId === 'New') {
                document.getElementById('modal-title').textContent = 'ì‹ ê·œ ì„¤ë¹„ ë“±ë¡';
                document.getElementById('eq-id').value = '(ìë™ ìƒì„±)';
                form.reset(); 
                historySection.style.display = 'none';
                document.getElementById('submit-button').textContent = 'ì„¤ë¹„ ë“±ë¡';
            } else {
                const data = MOCK_EQUIPMENT[eqId];
                document.getElementById('modal-title').textContent = 'ì„¤ë¹„ ìƒì„¸ ì •ë³´ (ìˆ˜ì •)';
                document.getElementById('eq-id').value = eqId;
                
                // ë°ì´í„° ë¡œë“œ
                document.getElementById('eq-name').value = data.name;
                document.getElementById('model-no').value = data.model;
                document.getElementById('line').value = data.line;
                document.getElementById('purchase-date').value = data.date;
                document.getElementById('sensor-id').value = data.sensor;
                
                // ì´ë ¥ ì„¹ì…˜ í‘œì‹œ ë° ë°ì´í„° ë¡œë“œ
                document.getElementById('last-pm-date').textContent = data.lastPM;
                document.getElementById('next-pm-date').textContent = data.nextPM;
                document.getElementById('last-fault').textContent = data.fault;
                historySection.style.display = 'block';
                document.getElementById('submit-button').textContent = 'ì„¤ë¹„ ì •ë³´ ìˆ˜ì •';
            }

            modal.style.display = 'block';
        }

        /** ì„¤ë¹„ íŒì—…ì„ ë‹«ìŠµë‹ˆë‹¤. */
        function closeEquipmentModal() {
            document.getElementById('equipment-modal').style.display = 'none';
        }

        // í¼ ì œì¶œ ì²˜ë¦¬ (ì‹œë®¬ë ˆì´ì…˜)
        document.getElementById('equipment-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const action = document.getElementById('submit-button').textContent;
            
            if (confirm(`${action}ì„(ë¥¼) ì‹¤í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                // ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œëŠ” ì—¬ê¸°ì— ì„¤ë¹„ ì •ë³´ ë“±ë¡/ìˆ˜ì • API í˜¸ì¶œ ë¡œì§ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.
                alert(`ğŸ‰ ì„¤ë¹„ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ${action === 'ì„¤ë¹„ ë“±ë¡' ? 'ë“±ë¡' : 'ìˆ˜ì •'}ë˜ì—ˆìŠµë‹ˆë‹¤.`);
                closeEquipmentModal();
                // location.reload(); 
            }
        });

        // ëª¨ë‹¬ ì˜ì—­ ë°–ì„ í´ë¦­í•˜ë©´ íŒì—… ë‹«ê¸°
        window.onclick = function(event) {
            const modal = document.getElementById('equipment-modal');
            if (event.target == modal) {
                closeEquipmentModal();
            }
        }
    </script>
</body>
</html>